
<form #dropBox class="flex flex-col p-4 space-y-4" enctype="multipart/form-data" >
  <div class="flex items-center gap-2 ">
    <button (click)="refreshGrid($event)" class="bg-layout-color-light1  w-10 h-10 flex justify-center items-center rounded-full shadow-gray-500 shadow active:shadow-none">
      <svg class="w-6 h-auto"  viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 2.181a.75.75 0 0 1 1.177-.616l4.432 3.068a.75.75 0 0 1 0 1.234l-4.432 3.068A.75.75 0 0 1 12 8.32V6a7 7 0 1 0 7 7 1 1 0 1 1 2 0 9 9 0 1 1-9-9V2.181z" fill="#fff"/></svg>
    </button>

    <span class="text-xl font-SourceSansPro-SemiBold uppercase">Files uploading progress</span>
  </div>

  <mat-progress-bar [value]="progressValue"  mode="determinate"></mat-progress-bar>
  <div class="gallery-grid">
    <ng-container *ngIf="(data$ | async) as data">

      <div *ngFor="let file of data.gallery" class="relative card">
        <div class="overlay transition-opacity duration-300 opacity-0 hover:opacity-50 flex justify-evenly items-center absolute w-full h-full text-white bg-black">

          <a (click)="setCoverPhoto($event, data._id!, file)" href="javascript:void(0)">
            <svg class="fill-white w-10 h-auto" viewBox="0 0 24 24">
              <g>
                <path fill="none" d="M0 0h24v24H0z"/>
                <path d="M2 9h3v12H2a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1zm5.293-1.293l6.4-6.4a.5.5 0 0 1 .654-.047l.853.64a1.5 1.5 0 0 1 .553 1.57L14.6 8H21a2 2 0 0 1 2 2v2.104a2 2 0 0 1-.15.762l-3.095 7.515a1 1 0 0 1-.925.619H8a1 1 0 0 1-1-1V8.414a1 1 0 0 1 .293-.707z"/>
              </g>
            </svg>
          </a>

          <a (click)="deletePhoto($event, data._id!, file)" href="javascript:void(0)">
            <svg class="fill-white w-10 h-auto"  clip-rule="evenodd" fill-rule="evenodd"  stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="Icon"><path d="m19.75 6c0-.414-.336-.75-.75-.75h-14c-.414 0-.75.336-.75.75v13.5c0 .862.342 1.689.952 2.298.609.61 1.436.952 2.298.952h9c.862 0 1.689-.342 2.298-.952.61-.609.952-1.436.952-2.298 0-4.5 0-13.5 0-13.5zm-1.5.75v12.75c0 .464-.184.909-.513 1.237-.328.329-.773.513-1.237.513-2.542 0-6.458 0-9 0-.464 0-.909-.184-1.237-.513-.329-.328-.513-.773-.513-1.237v-12.75z"/><path d="m16.5 6.75c.414 0 .75-.336.75-.75 0 0 0-1 0-2 0-.729-.29-1.429-.805-1.945-.516-.515-1.216-.805-1.945-.805-1.488 0-3.512 0-5 0-.729 0-1.429.29-1.945.805-.515.516-.805 1.216-.805 1.945v2c0 .414.336.75.75.75zm-.75-1.5h-7.5v-1.25c0-.332.132-.649.366-.884.235-.234.552-.366.884-.366h5c.332 0 .649.132.884.366.234.235.366.552.366.884z"/><path d="m20 5.25h-16c-.414 0-.75.336-.75.75s.336.75.75.75h16c.414 0 .75-.336.75-.75s-.336-.75-.75-.75z"/><path d="m8.75 10.5v7c0 .414.336.75.75.75s.75-.336.75-.75v-7c0-.414-.336-.75-.75-.75s-.75.336-.75.75z"/><path d="m13.75 10.5v7c0 .414.336.75.75.75s.75-.336.75-.75v-7c0-.414-.336-.75-.75-.75s-.75.336-.75.75z"/></g></svg>
          </a>

        </div>

        <figure class="aspect-video">
          <img class="w-full h-full block object-center object-cover" src="./assets/img/upload/{{ data._id }}/{{ file }}"/>
          <figcaption [ngClass]="(file === data.coverPhoto) ? '!bg-color-light8 bg-gray-500 text-xs italic p-2 text-center text-white' : 'bg-gray-500 text-xs italic p-2 text-center text-white'">
            {{ file }}
          </figcaption>
        </figure>
      </div>
    </ng-container>
  </div>
</form>
